{% extends "account/dashboard/v1/base.html" %}

{% block title %}
{{block.super}}
Job Board Listing
{% endblock title %}

{% load static humanize %}
{% block heading %}
<div class="nk-block-head nk-block-head-sm">
  <div class="nk-block-between">
    <div class="nk-block-head-content">
      <h3 class="nk-block-title page-title">Jobs</h3>
      <div class="nk-block-des text-soft">
        <p>
          We have a total of
          <span>200</span>
          <span>+</span>
          Active jobs.
        </p>
      </div>
    </div>
    <div class="nk-block-head-content">
      <div class="toggle-wrap nk-block-tools-toggle">
        <a href="#" class="btn btn-icon btn-trigger toggle-expand me-n1" data-target="pageMenu">
          <em class="icon ni ni-menu-alt-r"></em>
        </a>
        <div class="toggle-expand-content" data-content="pageMenu">
          <ul class="nk-block-tools g-3">




            <li>
              <div class="drodown">


                <a href="#" class="dropdown-toggle btn btn-success" data-bs-toggle="dropdown" aria-expanded="false">
                  <em class="d-none d-sm-inline icon ni ni-filter-alt"></em>
                  <span>Filtered By</span>
                  <em class="dd-indc icon ni ni-chevron-right"></em>
                </a>


                <div class="dropdown-menu dropdown-menu-end">
                  <ul class="link-list-opt no-bdr">
                    <li>
                      <a hx-on::after-request="window.location.reload()" style="cursor:pointer" hx-swap="none" hx-push-url="true" hx-boost="true" hx-get="{% url 'dashboard:invest:jobs:job_board_view' %}">
                        <span id="filterItem"> Tasks Application</span>
                      </a>
                    </li>
                    <li>
                      <a href="#">
                        <span id="filterItem">Approved Tasks</span>
                      </a>
                    </li>
                    <li>
                      <a href="#">
                        <span id="filterItem">Rejected Tasks</span>
                      </a>
                    </li>

                  </ul>
                </div>
              </div>
            </li>
            <li class="nk-block-tools-opt d-none d-sm-block">
              <a href="{% url 'dashboard:invest:jobs:job_board_view' %}" class="btn btn-primary">
                <em class="icon ni ni-folder"></em>
                <span>Upload</span>
              </a>
            </li>
            <!-- <li class="nk-block-tools-opt d-none d-sm-block">
              <a href="" class="btn btn-primary">
                <em class="fas fa-lightbulb"></em>
                <span>Tips</span>
              </a>
            </li> -->
            <li class="preview-item"><button type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#modalTabs">Tips & Info</button></li>
            
            
            
            <li class="nk-block-tools-opt d-block d-sm-none">
              <a href="#" class="btn btn-icon btn-primary">
                <em class="icon ni ni-plus"></em>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock heading %}

{% block main %}
<!--xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-->
<div class="modal fade" tabindex="-1" role="dialog" id="modalTabs">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <a href="#" class="close" data-bs-dismiss="modal"><em class="icon ni ni-cross-sm"></em></a>
      <div class="modal-body modal-body-md">
        <h4 class="title">Remote Task Guidelines</h4>
        <ul class="nk-nav nav nav-tabs">
          <li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" href="#tabItem1">Earning Tips</a></li>
          <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tabItem2">General Guidelines</a></li>
          <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tabItem3">Package Upgrade</a></li>
          <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tabItem4">Payments</a></li>
          <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tabItem5">Contact us</a></li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane active" id="tabItem1">
            <h6 class="title">Earning Tips</h6>
              <p>You should focus on writing quality articles, with SEO-optimized features and high-ranking keywords to boost visibility.</p>
              <p>Write the article or blog post in the <strong>blogging tab</strong>, or <a href="#">click here</a> to go to the page.</p>
              <p>Write consistently and donâ€™t focus on individual articles, but on growth. Each quality article earns you a pay that will be credited to your account balance.</p>
              <p>The not-so-high-quality articles you submit will still be posted on our blog platform.</p>
              <p><strong>Upgrade</strong> to increase your article limit and write more articles, completing more tasks per day.</p>
              <p>For online writing and other tasks, follow the given guidelines and earn high payouts.</p>

          </div>
          <div class="tab-pane" id="tabItem2">
            <h6 class="title">General Guidelines</h6>
            <p>We get remote tasks from trusted sources like online writing platforms, direct clients, Canvas dashboards for students, or third-party sources and post them on our platform for you to work on and earn.</p>
            <p>Jobs are posted daily and consistently, giving you ample opportunities to engage and earn.</p>
            <p>The Diamond package gives you a limit of 10 tasks per day. For example, whether you choose articles, academic tasks, or development tasks, they are limited to 10 tasks per day.</p>
            <p>Upgrade your account to earn more from our endless job offers and maximize your potential earnings.</p>
            <p>Tasks we offer range from article writing, blogging, academic tasks, transcription, data entry tasks, and more.</p>
            <p>When we receive a task from a trusted source that requires daily articles, we will assign it to you. Upon completion, we hand it to the client, who pays upon satisfaction.</p>
            <p>Each successful article or task earns you the indicated pay, which is withdrawable twice a week.</p>
          </div>
          <div class="tab-pane" id="tabItem3">
            <h6 class="title">Package Upgrade</h6>

              <p>Upgrade your task limit by choosing your desired package and depositing the required amount to secure your package. We charge for the packages since we acquire these task sources at high prices, which necessitates a small fee that guarantees you more task access and thus higher earning potential.</p>

              <p><strong>Pro Package:</strong> Gives you a limit of 10 to 20 tasks per day. Activation fee: 10,000 KES. Articles payout: $0.5 - $1.5 per article.</p>

              <p><strong>Master Package:</strong> Gives you a limit of 20 to 30 tasks per day. Activation fee: 15,000 KES. Articles payout: $0.5 - $1.5 per article.</p>

              <p><strong>Guru Package:</strong> Gives you a limit of 30 to 40 tasks per day. Activation fee: 20,000 KES. Articles payout: $0.5 - $1.5 per article.</p>

              <p><strong>Professor Package:</strong> Gives you a limit of 40 to 50 tasks per day. Activation fee: 30,000 KES. Articles payout: $0.5 - $1.5 per article.</p>

              <p><strong>Supreme Package:</strong> Gives you a limit of 50 to 60 tasks per day. Activation fee: 40,000 KES. Articles payout: $0.5 - $2 per article.</p>

              <p>To activate your package, go to the deposit section and click the deposit button. Enter the amount you have opted for from the packages and input the reason for the deposit to indicate your upgrade. For example, you can write: "Made a deposit for activating Master Package." You will receive an email to confirm your request, after which you can start completing tasks according to your new increased limit.</p>

          </div>
          <div class="tab-pane" id="tabItem4">
            <h6 class="title">Payments</h6>
            <p>We will credit you for quality tasks completed, and the amount will be available in your account balance.</p>

              <p>For other tasks you submit, some might be returned for revision, while others could be canceled. However, for articles, we will publish those that are not sold to our publishers on our site.</p>

              <p>We will grant you bonuses from earnings we get from AdSense, ensuring you still earn even if the articles are not sold.</p>

              <p>For example, if you write 10 articles, each with a cost per page of $1, and we successfully sell 8 to our third-party publishers, we will credit 8 payments to your account balance. The earnings from the remaining 2 articles will be credited into your bonus section.</p>

              <p>You can request a withdrawal for your earnings twice a week. We process withdrawals every Monday and Friday.</p>

              <p>Upgrade your package to earn more; the key to earning more is consistency and choosing the highest effective package.</p>

          </div>
          <div class="tab-pane" id="tabItem5">
            <h6 class="title">Contact Us</h6>
              <p>Contact us for any clarification or confirmation regarding the platform. Be brief and to the point to simplify communication.</p>

              <p>Contact the admin if you encounter task problems or need guidance on how to complete a task. Be brief and to the point to simplify communication.</p>

              <p>Contact the admin for withdrawals from your remote task earnings. Be brief and to the point to simplify communication.</p>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-->
<ul class="nk-sticky-toolbar">
  
  <li class="demo-thumb">
    <a class="toggle tipinfo" data-target="settingPanel" href="#" title="Tips & Info"><em class="icon ni ni-menu-squared"></em></a>
  </li>
 
  
</ul>
<!--xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-->
<div class="nk-demo-panel toggle-slide toggle-slide-right" data-content="settingPanel" data-toggle-overlay="true" data-toggle-body="true" data-toggle-screen="any">
  <div class="nk-demo-head">
    <h6 class="mb-0">Tips and Infomation</h6>
    <a class="nk-demo-close toggle btn btn-icon btn-trigger revarse mr-n2" data-target="settingPanel" href="#"><em class="icon ni ni-cross"></em></a>
  </div>
  <div class="nk-opt-panel" data-simplebar="">
    <div class="nk-opt-set">
      <div class="nk-opt-set-title">General Tips</div>
      <div class="nk-opt-list col-2x">
        <div>
          
          <ul class="nk-nav nav nav-tabs">
          
            <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tabItem2">General Guidelines</a></li>
          
          </ul>
          
         
        </div>
        
      </div>
    </div>
    <div class="nk-opt-set">
      <div class="nk-opt-set-title">Earning Tips</div>
      <div class="nk-opt-list col-2x">
        <div>
          <li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" href="#tabItem1">Earning Tips</a></li>
        </div>
        
      </div>
    </div>
    <div class="nk-opt-set nk-opt-set-aside">
      <div class="nk-opt-set-title">Package Upgrade</div>
      <div class="nk-opt-list col-4x">
        <div>
          <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tabItem3">Package Upgrade</a></li>
        </div>
        
      </div>
    </div>
    <div class="nk-opt-set nk-opt-set-header">
      <div class="nk-opt-set-title">Payments</div>
      <div class="nk-opt-list col-4x">
        <div>
          <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tabItem4">Payments</a></li>
        </div>
       
      </div>
    </div>
    <div class="nk-opt-set nk-opt-set-skin">
      <div class="nk-opt-set-title">Contact Us</div>
      <div class="nk-opt-list">
        <div class="nk-opt-item active" data-key="skin" data-update="default">
          <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tabItem5">Contact us</a></li>
        </div>
        
      </div>
    </div>
   
  </div>
</div>
<!--xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-->
<style>
  /* Existing styles for cards and tags */

  .with-border {
    border: 1px solid hwb(0 97% 3%);
    border-radius: 5px;
  }

  .tag {
    display: inline-block;
    background-color: rgb(157 114 255);
    /* Customize the background color as needed */
    color: white;
    padding: 2px 8px;
    font-size: 12px;
    border-radius: 12px;
    margin-right: 5px;
    /* Space between tags */
  }

  .price-tag {
    background-color: #28a745;
    /* Customize the background color for the price tag */
  }

  .date-tag {
    background-color: #007bff;
    /* Customize the background color for the date tag */
  }

  .academic-level-tag {
    background-color: #6f42c1;
    /* Customize the background color for the academic level tag */
  }

  .filter-button.active {
    font-weight: bold;
  }


  .skeleton,
  .card {
    min-height: 300px;
    background-color: #fff;
    border-radius: 5px;
    box-shadow: 0 4px 8px rgba(79, 77, 77, 0.1);
  }



/* Responsive for tablets and above */
@media (min-width: 688px) {
  .filter-button-group {
    justify-content: flex-start;
    gap: 2rem; /* Increase space between buttons for larger screens */
  }
}

/* Responsive for small screens (mobiles) */
@media (max-width: 575px) {
  .filter-button-group {
    flex-direction: column; /* Stack buttons vertically */
    align-items: center; /* Center the buttons */
  }

  .filter-button {
    width: 100%; /* Make buttons take full width on small screens */
    max-width: 300px; /* Limit the maximum width for buttons */
  }
}

  .btn-primary {
    display: inline-block;
  }

  .errorlist {
    color: crimson !important;
  }

  .filter-button-group {
    list-style-type: none;
    padding: 0;
    margin: 0;
    display: flex;
    gap: .2rem;
  }

  .filter-button-group li {
    display: inline-block;
  }

  /* Button base styles */
  .filter-button {
    padding: 10px 20px;
    font-size: 16px;
    color: white;
    background-image: linear-gradient(to right, #854fff, #1EE0AC);
    background-size: 200%;
    background-position: left;
    border-radius: 30px;
    transition: all 0.4s ease;
    cursor: pointer;
    position: relative;
    z-index: 1;
    overflow: hidden;
    border: none;
    outline: none;
    box-shadow: 0 0 2px rgba(0, 0, 0, 0.1);
  }

  /* Button hover effect */
  .filter-button:hover {
    background-position: right;
    box-shadow: 0 0 15px rgba(133, 79, 255, 0.5), 0 0 30px rgba(30, 224, 172, 0.5);
  }

  /* Glowing ring effect for active state */
  .filter-button.active {
    background-image: linear-gradient(to right, #1EE0AC, #854fff);
    background-size: 200%;
    background-position: right;
    animation: glow-ring 2s infinite;
    box-shadow: 0 0 10px #1EE0AC, 0 0 20px #854fff;
  }

  /* Water-ring-like glowing effect animation */
  @keyframes glow-ring {
    0% {
      box-shadow: 0 0 8px #1EE0AC, 0 0 10px #1EE0AC, inset 0 0 4px #854fff;
    }

    50% {
      box-shadow: 0 0 10px #854fff, 0 0 12px #854fff, inset 0 0 6px #1EE0AC;
    }

    100% {
      box-shadow: 0 0 8px #1EE0AC, 0 0 10px #1EE0AC, inset 0 0 4px #854fff;
    }
  }

  /* Active and hover text color */
  .filter-button.active:hover,
  .filter-button:hover {
    color: white;
  }
</style>
<!--xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-->

<ul class="filter-button-group mb-4 pb-1 d-flex g-3">
  <li>
    <button class="filter-button active" type="button" data-filter="all">All</button>
  </li>
  <li>
    <button class="filter-button" type="button" data-filter="online">Online/Remote</button>
  </li>
  <li>
    <button class="filter-button" type="button" data-filter="physical">Physical/local</button>
  </li>
  <li>
    <button class="filter-button" type="button" data-filter="abroad">Abroad</button>
  </li>
</ul>

<style>
  /* Base styles for the loading placeholder */


  /* Pulse animation */
  @keyframes pulse {
    0% {
      background-color: #f0f0f0df;
    }

    50% {
      background-color: #e0e0e0d9;
    }

    100% {
      background-color: #f0f0f0c0;
    }
  }

  /* Apply the pulse animation to the skeleton */
  .skeleton {
    animation: pulse 1.5s infinite;
  }
</style>



{% if messages %}
<div>
  {% for message in messages %}
  <div class="alert alert-{% if message.tags %}{{message.tags}}{% endif %} alert-dismissible" role="alert">
    <div>{{message}}</div> 
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
  {% endfor %}
</div>
{% endif %}

<div class="row" data-animation="true" id="jobsFiltration">
  <div class="col-12 col-md-6 mb-3">
    <div class="skeleton"></div>
  </div>
  <div class="col-12 col-md-6 mb-3">
    <div class="skeleton"></div>
  </div>
</div>

<div class="text-center mt-3">
  <button type="button" id="loadMoreBtn" class="btn btn-primary" style="display:none;">
    Load More
  </button>
</div>



{% block extendedJs %}

<script src="{% static 'js/project.js' %}"></script>

<script>
  $(document).ready(function () {
    let currentPage = 0;
    const jobsPerPage = 4;
    let currentFilter = "all";

    const filterButtons = $('.filter-button');
    const itemCount = $(".jobs_count");

    const loadJobs = (lookup = "all") => {
      const timestamp = new Date().getTime();
      $.ajax({
        url: `/dashboard/invest/jobs/filter/${lookup}/${currentPage}/${jobsPerPage}/?_=${timestamp}`,
        method: 'GET',
        dataType: "html",
        success: function (response) {
          const responseContainer = $("#jobsFiltration");

          if (response.trim() === '') {
            $("#loadMoreBtn").parent().html("<p>No more jobs to load</p>")
            $("#loadMoreBtn").hide();
          } else { $("#loadMoreBtn").show(); }

          if (currentPage === 0) { responseContainer.html(response) }
          else { responseContainer.append(response) }

          const filterItems = $('.filter-item');
          $(itemCount).text($(filterItems).length);
          currentPage += 1;
        },
        error: function (xhr, status, error) {
          $("#jobsFiltration").html(`<p class='d-flex align-items-center justify-content-center'>${error}</p>`);
          currentPage = 0;
        }
      });
    };

    $("#loadMoreBtn").off('click').on('click', function () {
      loadJobs(currentFilter);
    });

    loadJobs(currentFilter);

    $(filterButtons).each(function () {
      $(this).off('click').on('click', function () {
        $(filterButtons).removeClass("active");
        $(this).addClass("active");
        currentPage = 0;
        currentFilter = $(this).data('filter').trim().toLowerCase();
        loadJobs(currentFilter);
      });
    });
  });

</script>
{% endblock extendedJs %}



<script>
  $(document).ready(function () {
    const pageUrl = window.location.href
    $(".applicationPostForm").each(() => {
      $(this).submit(function (event) {
        // createSpinnerBtnSimulation()
        event.preventDefault();
        var form = $(this);
        /*var formData = new FormData(form);
        formData.append("path", window.location.href);
        console.log(formData);
        */

        const jobId = $("input[name=job_id]").val();
        const applicantId = $("input[name=applicant_id]").val();
        const url = `/jobs/applications/${jobId}/${applicantId}`;
        const responseHolder = $(`#message-${jobId}`)
        
        $.ajax({
          url: $(this).attr("action"),
          method: 'POST',
          data: form.serialize(),
          headers: {
            "X-CSRFToken": $("input[name=csrfmiddlewaretoken]").val(),
          },
          success: function (data) {
            console.log(data)
            resetTheSpinnerBtnSimulation(data.message, responseHolder);
          },
          error: function (xhr, jQueryResponse, errorThrown) {
            console.error(xhr.responseText);
            resetTheSpinnerBtnSimulation(xhr.responseText, responseHolder)
          },
          complete: function() {
            // remove spinner from btn
            setTimeout(() => {
              window.location.href = pageUrl;
            }, 3000)
          }
        })


      })

      const submitApplicationBtn = $("#job_application_submit_btn")

      const createSpinnerBtnSimulation = (message = 'submitting application...') => {
        $(submitApplicationBtn).addClass("align-items-center justify-content-between");
        $(submitApplicationBtn).html(`
            <span class="spinner-border spinner-border-sm" aria-hidden="true"></span>
            <span role="status">${message}</span>
          `)
        $(submitApplicationBtn).attr('disabled', true)
      }
      const resetTheSpinnerBtnSimulation = (message, holder) => {
        $(submitApplicationBtn).removeClass("align-items-center justify-content-between");
        $(submitApplicationBtn).html("Application Submitted")
        $(submitApplicationBtn).attr('disabled', false);
        if (message) {
          holder.html(message)
        } else {
          holder.html("")
        }
      }

    });
  })
</script>



<!--xxxxxxxx-->


{% endblock main %}